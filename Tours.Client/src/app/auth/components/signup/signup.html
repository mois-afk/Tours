<div class="container mt-5">
	<div class="row justify-content-center">
		<div class="col-md-6">
			<div class="card">
				<div class="card-header text-center">Регистрация</div>
				<div class="card-body">
					<form [formGroup]="form" (ngSubmit)="onSubmit()">
						<div class="form-group row align-items-center">
							<div class="col">
								<div class="form-floating mb-3">
								<input type="email" formControlName="email" class="form-control" placeholder="Email">
								<label>Email</label>
								</div>
							</div>
							<!-- <div class="col-auto">
								<button type="button" class="btn btn-outline-warning" (click)="sendCodeToEmail()">Получить код</button>
							</div> -->
						</div>
						@if (emailSent) {
							<div class="form-group">
								<div class="form-floating mb-3">
									<input type="text" formControlName="code" class="form-control" placeholder="Код подтверждения">
									<label>Код подтверждения</label>
								</div>
								<button type="button" class="btn btn-primary" (click)="verifyCode()">Проверить код</button>
								@if (codeVerified) {
									<div class="mt-2 text-success">{{ verificationMessage }}</div>
								}
								@else if (!codeVerified && verificationMessage) {
									<div class="mt-2 text-danger">{{ verificationMessage }}</div>
								}
							</div>
						}

						<div class="form-group">
							<div class="form-floating mb-3">
								<input type="text" formControlName="username" class="form-control" placeholder="Имя пользователя">
								<label>Имя пользователя</label>
							</div>
						</div>

						<div class="form-group">
							<div class="form-floating mb-3">
								<input type="password" formControlName="password" class="form-control" placeholder="Пароль">
								<label>Пароль</label>
							</div>
						</div>

						@if (errorMessage) {
							<div class="text-danger">{{ errorMessage }}</div>
						}

						<button class="btn btn-outline-success" type="submit" [disabled]="form.invalid">Зарегистрироваться</button>
					</form>

					<div class="mt-3">
						<a routerLink="/login" class="text-muted">Уже есть аккаунт?</a>
					</div>
				</div>
			</div>
    	</div>
 	</div>
</div>